---
## Author
author:
  name: Ярослав Антонович Меркулов
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: tusa.merkulov@gmail.com
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчёт по лабораторной работе №9"
license: "CC BY"
---

# Цель работы

Получить навыки работы с контекстом безопасности и политиками SELinux.

# Задание

1. Продемонстрируйте навыки по управлению режимами SELinux (см. раздел 9.4.1).
2. Продемонстрируйте навыки по восстановлению контекста безопасности SELinux (см.
раздел 9.4.2).
3. Настройте контекст безопасности для нестандартного расположения файлов веб-
службы (см. раздел 9.4.3).
4. Продемонстрируйте навыки работы с переключателями SELinux (см. раздел 9.4.4).


# Выполнение лабораторной работы

1. Через учетную запись root проверяем состояние SELinux

![Состояние SELinux](image/1.png){#fig-001 width=70%}

2. Просматриваем, в каком режиме работает selinux

![Режим selinux](image/2.png){#fig-002 width=70%}

3. В файле /etc/sysconfig/selinux отключаем selinux

![Отключение selinux](image/3.png){#fig-003 width=70%}

4. Проверяем состояние

![Состояние selinux](image/4.png){#fig-004 width=70%}

5. Пытаемся переключить режим (не получается, т.к. selinux отключен)

![Попытка переключить режим](image/5.png){#fig-005 width=70%}

6. Меняем в конфиге значение на enforcing и перезагружаемся. Проверяем состояние

![Статус selinux](image/6.png){#fig-006 width=70%}

7. Просматриваем контекст безопасности файла /etc/hosts

![Контекст безопасности](image/7.png){#fig-007 width=70%}

8. Копируем файл в домашний каталог и снова проверяем контекст

![Копирование и проверка контекста](image/8.png){#fig-008 width=70%}

9. Копируем новосозданный файл обратное в etc (подтверждаем перезапись)

![Перезапись hosts](image/9.png){#fig-009 width=70%}

10. Тип контекста остался таким же, каким был в домашнем каталоге

![Контекст](image/10.png){#fig-010 width=70%}

11. Исправляем контекст

![Исправление контекста](image/11.png){#fig-011 width=70%}

12. Проверяем исправление

![Контекст](image/12.png){#fig-012 width=70%}

13. Запускаем массовое исправление

![Запуск исправления](image/13.png){#fig-013 width=70%}

14. Смотрим консоль при запуске

![Применение исправлений](image/14.png){#fig-014 width=70%}

15. Устанавливаем lynx (httpd уже установлен)

![Установка lynx](image/15.png){#fig-015 width=70%}

16. Создаём каталог, переходим в него, создаём html файл

![Работа с каталогом](image/16.png){#fig-016 width=70%}

17. В файл записываем текст

![Текст](image/17.png){#fig-017 width=70%}

18. Закомментируем старые строки в конфиге, добавим свои

![Новые строки](image/18.png){#fig-018 width=70%}

19. Повторяем операцию

![Новые строки](image/19.png){#fig-019 width=70%}

20. Запускаем сервер и службу httpd

![Запуск сервера и службы](image/20.png){#fig-020 width=70%}

21. Через lynx запускаем localhost. Видем дефолтную страницу lynx.

![kill процессов](image/21.png){#fig-021 width=70%}

22. Применяем новую метку контекста к катологу /web и восстанавливаем контекст

![Изменение метки контекста и восстановление контекста](image/22.png){#fig-022 width=70%}

23. После перезагрузки снова открываем localhost через lynx

![Наша страница в lynx](image/23.png){#fig-023 width=70%}

24. Просматриваем список переключателей SElinux для ftp

![Список переключателей](image/24.png){#fig-024 width=70%}

25. Выводим список переключателей с пояснением

![Список с пояснением](image/25.png){#fig-025 width=70%}

26. Меняем значение на on, проверяем

![Изменение значения переключателя](image/26.png){#fig-026 width=70%}

27. Проверяем ещё раз

![С пояснением](image/27.png){#fig-027 width=70%}

28. Меняем глобальные переключатель, проверяем результат

![Глобальный переключатель](image/28.png){#fig-028 width=70%}

# Контрольные вопросы

1. Какая команда даёт обзор всех текущих заданий оболочки?
jobs

2. Как остановить текущее задание оболочки, чтобы продолжить его выполнение в фоновом режиме?
Ctrl + Z, bg

3. Какую комбинацию клавиш можно использовать для отмены текущего задания оболочки?
Ctrl + C

4. Необходимо отменить одно из начатых заданий. Доступ к оболочке, в которой в данный момент работает пользователь, невозможен. Что можно сделать, чтобы отменить
задание?
Открыть новый терминал, с помощью команды kill "убить" процесс задания

5. Какая команда используется для отображения отношений между родительскими и дочерними процессами?
pstree

6. Какая команда позволит изменить приоритет процесса с идентификатором 1234 на
более высокий?
renice -n -5 1234

7. В системе в настоящее время запущено 20 процессов dd. Как проще всего остановить
их все сразу?
killall dd

8. Какая команда позволяет остановить команду с именем mycommand?
pkill mycommand

9. Какая команда используется в top, чтобы убить процесс?
Клавиша k

10. Как запустить команду с достаточно высоким приоритетом, не рискуя, что не хватит
ресурсов для других процессов?
Рекомендуемый способ повысить приоритет без риска для остальных процессов — задать небольшой положительный сдвиг вверх, например, на 5 пунктов вниз относительно стандартного значения. Это повысит приоритет вашей команды, сохраняя стабильность системы.
nice -n -5 mycommand

# Выводы

Были получены навыки  работы с контекстом безопасности и политиками SELinux.

