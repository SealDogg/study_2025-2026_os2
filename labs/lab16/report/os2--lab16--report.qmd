---
## Author
author:
  name: Ярослав Антонович Меркулов
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: tusa.merkulov@gmail.com
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчёт по лабораторной работе №16"
license: "CC BY"
---

# Цель работы

Освоить работу с RAID-массивами при помощи утилиты mdadm.

# Задание

1. Прочитайте руководство по работе с утилитами fdisk, sfdisk и mdadm.
2. Добавить три диска на виртуальную машину (объёмом от 512 MiB каждый). При помо-
щи sfdisk создать на каждом из дисков по одной партиции, задав тип раздела для
RAID (см. разделы 16.4.1, 16.4.2).
3. Создать массив RAID 1 из двух дисков, смонтировать его. Эмитировать сбой одного из
дисков массива, удалить искусственно выведенный из строя диск, добавить в массив
работающий диск (см. раздел 16.4.2).
4. Создать массив RAID 1 из двух дисков, смонтировать его. Добавить к массиву тре-
тий диск. Эмитировать сбой одного из дисков массива. Проанализировать состояние
массива, указать различия по сравнению с предыдущим случаем (см. раздел 16.4.3).
5. Создать массив RAID 1 из двух дисков, смонтировать его. Добавить к массиву третий
диск. Изменить тип массива с RAID1 на RAID5, изменить число дисков в массиве с 2 на 3.
Проанализировать состояние массива, указать различия по сравнению с предыдущим
случаем (см. раздел 16.4.4).


# Выполнение лабораторной работы

1. Создаём 3 диска по 512 мб, подключаем их

![Новые 3 диска](image/1.png){#fig-001 width=70%}

2. Проверяем диски

![Проверка разделов](image/2.png){#fig-002 width=70%}

3. Смотрим id разделов

![Тип раздела](image/3.png){#fig-003 width=70%}

4. Меняем тип на linux raid autodetect, проверяем

![Новый тип раздела](image/4.png){#fig-004 width=70%}

5. С помощью mdadm создаём raid 1 из двух дисков

![Создание raid 1](image/5.png){#fig-005 width=70%}

6. Проверяем, создан ли raid

![Raid 1](image/6.png){#fig-006 width=70%}

7. Создаём файловую систему ext4

![Создание файловой системы](image/7.png){#fig-007 width=70%}

8. Монтируем raid

![Монтирование](image/8.png){#fig-008 width=70%}

9. Включаем автомонтирование

![fstab](image/9.png){#fig-009 width=70%}

10. Вызываем сбой одного из дисков, удаляем его, заменяем на другой

![Замена диска](image/10.png){#fig-010 width=70%}

11. Проверка после сбоя

![Проверка](image/11.png){#fig-011 width=70%}

12. Удаляем массив и очищаем метаданные

![Удаление](image/12.png){#fig-012 width=70%}

13. Снова создаём raid 1 из двух дисков, один диск добавляем после создания

![Создание raid1](image/13.png){#fig-013 width=70%}

14. Смотрим информацию

![Информация](image/14.png){#fig-014 width=70%}

15. Видим, что всего 3 диска, 2 активных

![Диски](image/15.png){#fig-015 width=70%}

16. Вызываем сбой одного из дисков, он автоматически заменяется третьим

![Автозамена диска](image/16.png){#fig-016 width=70%}

17. Удаляем массив

![Удаление](image/17.png){#fig-017 width=70%}

18. Снова создаём raid 1 из двух дисков, добавляем 3 диск

![Создание raid1](image/18.png){#fig-018 width=70%}

19. Преобразуем raid 1 в raid 5

![Преобразование в raid5](image/19.png){#fig-019 width=70%}

20. Меняем количество дисков на 3, проверяем, что все 3 диска активны

![Проверка](image/20.png){#fig-020 width=70%}

21. Удаляем

![Удаление массива](image/21.png){#fig-021 width=70%}





# Контрольные вопросы

1. Приведите определение RAID.

RAID (Redundant Array of Independent Disks) — это технология виртуализации данных, объединяющая несколько физических дисков в единый логический массив для повышения производительности, ёмкости или отказоустойчивости хранения.
​
2. Какие типы RAID-массивов существуют на сегодняшний день?

Основные спецификации RAID-массивов:
– RAID 0 (striping). Чередование. Высокая скорость, но не обеспечивается отказоустойчивость. Поэтому фактически не считается RAID.
– RAID 1. Зеркалирование. Каждый диск представляет собой полную копию другого.
Минимальное количество дисков — 2.
– RAID 2. Использует коды Хемминга для контроля чётности. Минимальное количество
дисков — 7.
– RAID 3. Один из дисков используется для хранения блоков чётности, остальные — для
хранения данных. Данные разбиваются на байты.
– RAID 4. Аналогичен RAID 3, но данные при этом разбиваются на блоки (stripes).
– RAID 5. Блоки данных и контрольные суммы записываются на все диски циклично.
Для хранения контрольных сумм используется объём одного диска. Минимальное
количество дисков при использовании RAID 5 равно трём.
– RAID 6. Аналогичен RAID 5. Для хранения контрольных сумм используется объём двух
дисков. Основан на кодах Рида–Соломона. Минимальное количество дисков — четыре.
– RAID 10. Массив RAID 1, составленный из массивов RAID 0.
– RAID 50, RAID 60. Аналог RAID 10, составленного из массивов RAID 5 и RAID 6 соответственно.


3. Охарактеризуйте RAID 0, RAID 1, RAID 5, RAID 6, опишите алгоритм работы, назначение, приведите примеры применения.

– RAID 0 (striping). Чередование. Высокая скорость, но не обеспечивается отказоустойчивость. Поэтому фактически не считается RAID.
– RAID 1. Зеркалирование. Каждый диск представляет собой полную копию другого.
Минимальное количество дисков — 2.
– RAID 5. Блоки данных и контрольные суммы записываются на все диски циклично.
Для хранения контрольных сумм используется объём одного диска. Минимальное
количество дисков при использовании RAID 5 равно трём.
– RAID 6. Аналогичен RAID 5. Для хранения контрольных сумм используется объём двух
дисков. Основан на кодах Рида–Соломона. Минимальное количество дисков — четыре.

# Выводы

Была освоена работа с RAID-массивами при помощи утилиты mdadm.

